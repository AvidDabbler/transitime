<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_25) on Mon Aug 25 17:40:06 PDT 2014 -->
<title>ChinaGpsOffset</title>
<meta name="date" content="2014-08-25">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ChinaGpsOffset";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ChinaGpsOffset.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../org/transitime/utils/ChinaGpsOffset.LatLon.html" title="class in org.transitime.utils"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/transitime/utils/ChinaGpsOffset.html" target="_top">Frames</a></li>
<li><a href="ChinaGpsOffset.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.transitime.utils</div>
<h2 title="Class ChinaGpsOffset" class="title">Class ChinaGpsOffset</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.transitime.utils.ChinaGpsOffset</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">ChinaGpsOffset</span>
extends java.lang.Object</pre>
<div class="block">For dealing with the map offset issue in China. All maps have to be offset in
 China, a legacy from the cold war. So to properly show stops and shapes on a
 map, such as a Google one, for China need to offset the locations. Code is
 based on https://on4wp7.codeplex.com/SourceControl/changeset/view/21455#
 EvilTransform.cs as described at the very useful posting at
 http://www.sinosplice
 .com/life/archives/2013/07/16/a-more-complete-ios-solution
 -to-the-china-gps-offset-problem.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>SkiBu Smith</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../org/transitime/utils/ChinaGpsOffset.LatLon.html" title="class in org.transitime.utils">ChinaGpsOffset.LatLon</a></strong></code>
<div class="block">This simple inner class created so don't depend 
 on other existing class that is for use with db.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/transitime/utils/ChinaGpsOffset.html#ChinaGpsOffset()">ChinaGpsOffset</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/transitime/utils/ChinaGpsOffset.html#main(java.lang.String[])">main</a></strong>(java.lang.String[]&nbsp;args)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/transitime/utils/ChinaGpsOffset.html#outOfChina(double, double)">outOfChina</a></strong>(double&nbsp;lat,
          double&nbsp;lon)</code>
<div class="block">Returns true if the lat/lon specified is within a rectangle that
 very roughly describes China.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../org/transitime/utils/ChinaGpsOffset.LatLon.html" title="class in org.transitime.utils">ChinaGpsOffset.LatLon</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/transitime/utils/ChinaGpsOffset.html#transform(double, double)">transform</a></strong>(double&nbsp;wgLat,
         double&nbsp;wgLon)</code>
<div class="block">World Geodetic System ==> Mars Geodetic System.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../../org/transitime/utils/ChinaGpsOffset.LatLon.html" title="class in org.transitime.utils">ChinaGpsOffset.LatLon</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/transitime/utils/ChinaGpsOffset.html#transformBack(double, double)">transformBack</a></strong>(double&nbsp;marsLat,
             double&nbsp;marsLon)</code>
<div class="block">Mars Geodetic System ==> World Geodetic System.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ChinaGpsOffset()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ChinaGpsOffset</h4>
<pre>public&nbsp;ChinaGpsOffset()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="transform(double, double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transform</h4>
<pre>public static&nbsp;<a href="../../../org/transitime/utils/ChinaGpsOffset.LatLon.html" title="class in org.transitime.utils">ChinaGpsOffset.LatLon</a>&nbsp;transform(double&nbsp;wgLat,
                              double&nbsp;wgLon)</pre>
<div class="block">World Geodetic System ==> Mars Geodetic System. For transforming between
 a regular latitude/longitude to values that can be used with a map API
 so that the datapoints will be displayed in the correct place on the maps.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>wgLat</code> - </dd><dd><code>wgLon</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="transformBack(double, double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transformBack</h4>
<pre>public static&nbsp;<a href="../../../org/transitime/utils/ChinaGpsOffset.LatLon.html" title="class in org.transitime.utils">ChinaGpsOffset.LatLon</a>&nbsp;transformBack(double&nbsp;marsLat,
                                  double&nbsp;marsLon)</pre>
<div class="block">Mars Geodetic System ==> World Geodetic System. Don't have an exact
 formula but the transformation is known to be pretty consistent and not
 vary that much over the roughly 500m difference that the transformation
 causes. Therefore simply determines for the lat/lon in Mars coordinates
 what the offset is for that location and then subtracts that offset. This
 provides a good initial result, but where the fifth digit of a lat/lon is
 still off by one. So now that we have a better idea of the location the
 geodetic==>mars offset is determined for this new location, new slightly
 more accurate offsets are determined, and the geodetic location is
 determined again. The second iteration results found to usually be
 accurate to about 7 decimal places but for a significant number of
 locations the 6th digit would change and for some positions the offset
 would continue to creep, which is undesirable. Therefore do one last
 iteration. After the third iteration very few locations offset the 6th
 digit and there is no creep, which is great.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>marsLat</code> - </dd><dd><code>marsLon</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="outOfChina(double, double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outOfChina</h4>
<pre>public static&nbsp;boolean&nbsp;outOfChina(double&nbsp;lat,
                 double&nbsp;lon)</pre>
<div class="block">Returns true if the lat/lon specified is within a rectangle that
 very roughly describes China. Note that this will include locations
 in parts of other adjacent countries that do not use the Mars
 mapping!</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>lat</code> - </dd><dd><code>lon</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ChinaGpsOffset.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../org/transitime/utils/ChinaGpsOffset.LatLon.html" title="class in org.transitime.utils"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/transitime/utils/ChinaGpsOffset.html" target="_top">Frames</a></li>
<li><a href="ChinaGpsOffset.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
