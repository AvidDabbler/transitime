<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_25) on Fri Mar 06 08:51:02 PST 2015 -->
<title>VehicleDataCache</title>
<meta name="date" content="2015-03-06">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="VehicleDataCache";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/VehicleDataCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/transitime/core/dataCache/PredictionDataCache.html" title="class in org.transitime.core.dataCache"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/transitime/core/dataCache/VehicleStateManager.html" title="class in org.transitime.core.dataCache"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/transitime/core/dataCache/VehicleDataCache.html" target="_top">Frames</a></li>
<li><a href="VehicleDataCache.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.transitime.core.dataCache</div>
<h2 title="Class VehicleDataCache" class="title">Class VehicleDataCache</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.transitime.core.dataCache.VehicleDataCache</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">VehicleDataCache</span>
extends java.lang.Object</pre>
<div class="block">For storing and retrieving vehicle information that can be used by clients.
 Is updated every time VehicleState is changed. The info is stored in an
 immutable IpcExtVehicle object since VehicleState changes dynamically and is
 therefore not always coherent. This way the info transmitted to clients will
 always be coherent without having to synchronize VehicleState for when
 converting to a IpcExtVehicle. Organizes vehicles info by vehicle ID but also
 by route so can easily determine which vehicles are associated with a route.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>SkiBu Smith</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/transitime/core/dataCache/VehicleDataCache.html#cacheVehicleConfig(org.transitime.db.structs.AvlReport)">cacheVehicleConfig</a></strong>(<a href="../../../../org/transitime/db/structs/AvlReport.html" title="class in org.transitime.db.structs">AvlReport</a>&nbsp;avlReport)</code>
<div class="block">To be called when vehicle encountered in AVL feed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../../../org/transitime/core/dataCache/VehicleDataCache.html" title="class in org.transitime.core.dataCache">VehicleDataCache</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/transitime/core/dataCache/VehicleDataCache.html#getInstance()">getInstance</a></strong>()</code>
<div class="block">Gets the singleton instance of this class.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../org/transitime/ipc/data/IpcCompleteVehicle.html" title="class in org.transitime.ipc.data">IpcCompleteVehicle</a></code></td>
<td class="colLast"><code><strong><a href="../../../../org/transitime/core/dataCache/VehicleDataCache.html#getVehicle(java.lang.String)">getVehicle</a></strong>(java.lang.String&nbsp;vehicleId)</code>
<div class="block">Returns Vehicle info for the vehicleId specified.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Collection&lt;<a href="../../../../org/transitime/db/structs/VehicleConfig.html" title="class in org.transitime.db.structs">VehicleConfig</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/transitime/core/dataCache/VehicleDataCache.html#getVehicleConfigs()">getVehicleConfigs</a></strong>()</code>
<div class="block">Returns an unmodifiable collection of the static vehicle configurations.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.Collection&lt;<a href="../../../../org/transitime/ipc/data/IpcCompleteVehicle.html" title="class in org.transitime.ipc.data">IpcCompleteVehicle</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/transitime/core/dataCache/VehicleDataCache.html#getVehicles()">getVehicles</a></strong>()</code>
<div class="block">Returns Vehicle info for all vehicles.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Collection&lt;<a href="../../../../org/transitime/ipc/data/IpcCompleteVehicle.html" title="class in org.transitime.ipc.data">IpcCompleteVehicle</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/transitime/core/dataCache/VehicleDataCache.html#getVehicles(java.util.Collection)">getVehicles</a></strong>(java.util.Collection&lt;java.lang.String&gt;&nbsp;vehicleIds)</code>
<div class="block">Returns collection of vehicles whose vehicleIds were specified using the
 vehiclesIds parameter.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.Collection&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/transitime/core/dataCache/VehicleDataCache.html#getVehiclesByBlockId(java.lang.String)">getVehiclesByBlockId</a></strong>(java.lang.String&nbsp;blockId)</code>
<div class="block">Returns copy of list of vehicle IDs that are currently assigned to the
 specified block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Collection&lt;<a href="../../../../org/transitime/ipc/data/IpcCompleteVehicle.html" title="class in org.transitime.ipc.data">IpcCompleteVehicle</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/transitime/core/dataCache/VehicleDataCache.html#getVehiclesForRoute(java.util.Collection)">getVehiclesForRoute</a></strong>(java.util.Collection&lt;java.lang.String&gt;&nbsp;routeIdsOrShortNames)</code>
<div class="block">Returns Collection of vehicles currently associated with specified
 routes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.Collection&lt;<a href="../../../../org/transitime/ipc/data/IpcCompleteVehicle.html" title="class in org.transitime.ipc.data">IpcCompleteVehicle</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../org/transitime/core/dataCache/VehicleDataCache.html#getVehiclesForRoute(java.lang.String)">getVehiclesForRoute</a></strong>(java.lang.String&nbsp;routeIdOrShortName)</code>
<div class="block">Returns Collection of Vehicles currently associated with specified route.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../org/transitime/core/dataCache/VehicleDataCache.html#updateVehicle(org.transitime.core.VehicleState)">updateVehicle</a></strong>(<a href="../../../../org/transitime/core/VehicleState.html" title="class in org.transitime.core">VehicleState</a>&nbsp;vehicleState)</code>
<div class="block">Updates the maps containing the vehicle info.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getInstance()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInstance</h4>
<pre>public static&nbsp;<a href="../../../../org/transitime/core/dataCache/VehicleDataCache.html" title="class in org.transitime.core.dataCache">VehicleDataCache</a>&nbsp;getInstance()</pre>
<div class="block">Gets the singleton instance of this class.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="cacheVehicleConfig(org.transitime.db.structs.AvlReport)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheVehicleConfig</h4>
<pre>public&nbsp;void&nbsp;cacheVehicleConfig(<a href="../../../../org/transitime/db/structs/AvlReport.html" title="class in org.transitime.db.structs">AvlReport</a>&nbsp;avlReport)</pre>
<div class="block">To be called when vehicle encountered in AVL feed. Adds the vehicle to
 the cache and stores in database if haven't done so yet.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>avlReport</code> - </dd></dl>
</li>
</ul>
<a name="getVehicleConfigs()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVehicleConfigs</h4>
<pre>public&nbsp;java.util.Collection&lt;<a href="../../../../org/transitime/db/structs/VehicleConfig.html" title="class in org.transitime.db.structs">VehicleConfig</a>&gt;&nbsp;getVehicleConfigs()</pre>
<div class="block">Returns an unmodifiable collection of the static vehicle configurations.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Unmodifiable collection of VehicleConfig objects</dd></dl>
</li>
</ul>
<a name="getVehiclesForRoute(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVehiclesForRoute</h4>
<pre>public&nbsp;java.util.Collection&lt;<a href="../../../../org/transitime/ipc/data/IpcCompleteVehicle.html" title="class in org.transitime.ipc.data">IpcCompleteVehicle</a>&gt;&nbsp;getVehiclesForRoute(java.lang.String&nbsp;routeIdOrShortName)</pre>
<div class="block">Returns Collection of Vehicles currently associated with specified route.
 Filters out info more than MAX_AGE_MSEC since it means that the info is
 obsolete and shouldn't be displayed. Returns null if no vehicles for
 specified route.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>routeIdOrShortName</code> - Specifies which route to return vehicle data for. Can be a
            route_short_name or a route_id. Can also be null or empty
            string to retrieve vehicles that are not assigned to a route.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Collection of IpcExtVehicle for vehicles on route, or null if no
         vehicles for the route.</dd></dl>
</li>
</ul>
<a name="getVehiclesForRoute(java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVehiclesForRoute</h4>
<pre>public&nbsp;java.util.Collection&lt;<a href="../../../../org/transitime/ipc/data/IpcCompleteVehicle.html" title="class in org.transitime.ipc.data">IpcCompleteVehicle</a>&gt;&nbsp;getVehiclesForRoute(java.util.Collection&lt;java.lang.String&gt;&nbsp;routeIdsOrShortNames)</pre>
<div class="block">Returns Collection of vehicles currently associated with specified
 routes. Filters out info more than MAX_AGE_MSEC since it means that the
 info is obsolete and shouldn't be displayed. Needs to return a collection
 because there are situations, such as unscheduled assignments, where
 multiple vehicles can be assigned to a block.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>routeIdsOrShortNames</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Collection of vehicles for the route. Empty collection if there
         are none.</dd></dl>
</li>
</ul>
<a name="getVehicles(java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVehicles</h4>
<pre>public&nbsp;java.util.Collection&lt;<a href="../../../../org/transitime/ipc/data/IpcCompleteVehicle.html" title="class in org.transitime.ipc.data">IpcCompleteVehicle</a>&gt;&nbsp;getVehicles(java.util.Collection&lt;java.lang.String&gt;&nbsp;vehicleIds)</pre>
<div class="block">Returns collection of vehicles whose vehicleIds were specified using the
 vehiclesIds parameter. No filtering of old vehicles is done since
 requesting info on specific vehicles.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vehicleIds</code> - Specifies which vehicles should return.</dd>
<dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="getVehicle(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVehicle</h4>
<pre>public&nbsp;<a href="../../../../org/transitime/ipc/data/IpcCompleteVehicle.html" title="class in org.transitime.ipc.data">IpcCompleteVehicle</a>&nbsp;getVehicle(java.lang.String&nbsp;vehicleId)</pre>
<div class="block">Returns Vehicle info for the vehicleId specified. No filtering of old
 vehicles is done since requesting info on specific vehicle.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vehicleId</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="getVehicles()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVehicles</h4>
<pre>public&nbsp;java.util.Collection&lt;<a href="../../../../org/transitime/ipc/data/IpcCompleteVehicle.html" title="class in org.transitime.ipc.data">IpcCompleteVehicle</a>&gt;&nbsp;getVehicles()</pre>
<div class="block">Returns Vehicle info for all vehicles. Filter out schedule based
 predictions if trip time has already passed since should always filter
 out such vehicles. But don't filter out stale vehicles since this command
 could be useful to see all vehicles, including ones in the bus yard that
 have been turned off for a while.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="getVehiclesByBlockId(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVehiclesByBlockId</h4>
<pre>public&nbsp;java.util.Collection&lt;java.lang.String&gt;&nbsp;getVehiclesByBlockId(java.lang.String&nbsp;blockId)</pre>
<div class="block">Returns copy of list of vehicle IDs that are currently assigned to the
 specified block. A copy is returned since the list is quite small and
 will often need to iterate over it while calling methods that modify the
 underlying list. Using a copy makes sure that don't get a
 ConcurrentModificationException. Will return empty list if no vehicles
 assigned to that block (won't return null). Usually there will only be a
 single vehicle associated with a block assignment but there are cases,
 such as unscheduled assignments, where there could be multiple vehicles.
 Therefore this method returns a List. No filtering of vehicles is done
 since dealing with vehicle IDs, not IpcExtVehicle objects, and therefore
 harder to tell if vehicle is stale.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blockId</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>Copy of list of vehicle IDs associated with the specified block
         Id. Returns empty list instead of null if no vehicles associated
         with the block ID.</dd></dl>
</li>
</ul>
<a name="updateVehicle(org.transitime.core.VehicleState)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>updateVehicle</h4>
<pre>public&nbsp;void&nbsp;updateVehicle(<a href="../../../../org/transitime/core/VehicleState.html" title="class in org.transitime.core">VehicleState</a>&nbsp;vehicleState)</pre>
<div class="block">Updates the maps containing the vehicle info. Should be called every time
 vehicle state changes.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>vehicleState</code> - The current VehicleState</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/VehicleDataCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/transitime/core/dataCache/PredictionDataCache.html" title="class in org.transitime.core.dataCache"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../org/transitime/core/dataCache/VehicleStateManager.html" title="class in org.transitime.core.dataCache"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/transitime/core/dataCache/VehicleDataCache.html" target="_top">Frames</a></li>
<li><a href="VehicleDataCache.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
