<?xml version="1.0" encoding="UTF-8"?>

<ehcache:config
  xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
  xmlns:terracotta='http://www.ehcache.org/v3/clustered'
  xmlns:ehcache='http://www.ehcache.org/v3'
  xsi:schemaLocation="http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.1.xsd
    http://www.ehcache.org/v3/clustered http://www.ehcache.org/schema/ehcache-clustered-ext-3.1.xsd">

    <ehcache:service>
    <terracotta:cluster>
      <terracotta:connection url="terracotta://tc-server:9410/clustered"/>
      <terracotta:server-side-config auto-create="true">
        <terracotta:default-resource from="offheap-1"/>
      </terracotta:server-side-config>
    </terracotta:cluster>
 	</ehcache:service>
	


	<ehcache:cache alias="dwellTimeModelCache">
		<ehcache:key-type >org.transitclock.core.dataCache.StopPathCacheKey</ehcache:key-type>
		<ehcache:value-type>org.transitclock.core.predictiongenerator.scheduled.dwell.DwellModel</ehcache:value-type>
		<ehcache:expiry>
			<ehcache:tti unit="days">7</ehcache:tti>
		</ehcache:expiry>
		<ehcache:resources>
			<ehcache:heap unit="entries">2000</ehcache:heap>
			<ehcache:offheap unit="MB">100</ehcache:offheap>		
		</ehcache:resources>
		
	</ehcache:cache>

	<ehcache:cache alias="arrivalDeparturesByTrip">
		<ehcache:key-type >org.transitclock.core.dataCache.TripKey</ehcache:key-type>
		<ehcache:value-type>org.transitclock.core.dataCache.TripEvents</ehcache:value-type>
		<ehcache:expiry>
			<ehcache:tti unit="days">7</ehcache:tti>
		</ehcache:expiry>
		<ehcache:resources>
			<ehcache:heap unit="entries">63000</ehcache:heap>
			<ehcache:offheap unit="GB">2</ehcache:offheap>
			<terracotta:clustered-dedicated unit="GB">4</terracotta:clustered-dedicated>
		</ehcache:resources>
		
	</ehcache:cache>

	<ehcache:cache alias="arrivalDeparturesByStop">
		<ehcache:key-type>org.transitclock.core.dataCache.StopArrivalDepartureCacheKey</ehcache:key-type>
		<ehcache:value-type>org.transitclock.core.dataCache.StopEvents</ehcache:value-type>
		<ehcache:expiry>
			<ehcache:ttl unit="days">1</ehcache:ttl>
		</ehcache:expiry>
		<ehcache:resources>
			<ehcache:heap unit="entries">15000</ehcache:heap>
			<ehcache:offheap unit="GB">2</ehcache:offheap>
			<terracotta:clustered-dedicated unit="GB">4</terracotta:clustered-dedicated>
		</ehcache:resources>
		
	</ehcache:cache>

	<ehcache:cache alias="KalmanErrorCache">
		<ehcache:key-type>org.transitclock.core.dataCache.KalmanErrorCacheKey</ehcache:key-type>
		<ehcache:value-type>org.transitclock.core.dataCache.KalmanError</ehcache:value-type>
		<ehcache:expiry>
			<ehcache:tti unit="days">21</ehcache:tti>
		</ehcache:expiry>
		<ehcache:resources>
			<ehcache:heap unit="entries">100000</ehcache:heap>
			<ehcache:offheap unit="GB">1</ehcache:offheap>
			<terracotta:clustered-dedicated unit="GB">2</terracotta:clustered-dedicated>
		</ehcache:resources>
	</ehcache:cache>

	<ehcache:cache alias="HistoricalAverageCache">
		<ehcache:key-type>org.transitclock.core.dataCache.StopPathCacheKey</ehcache:key-type>
		<ehcache:value-type>org.transitclock.core.dataCache.HistoricalAverage</ehcache:value-type>
		<ehcache:expiry>
			<ehcache:tti unit="days">14</ehcache:tti>
		</ehcache:expiry>
		<ehcache:resources>
			<ehcache:heap unit="entries">1</ehcache:heap>
		</ehcache:resources>
	 </ehcache:cache>

	 <ehcache:cache alias="StopPathPredictionCache">
		 <ehcache:key-type>java.lang.Long</ehcache:key-type>
		 <ehcache:value-type>java.lang.String</ehcache:value-type>
		 <ehcache:expiry>
			 <ehcache:ttl unit="hours">1</ehcache:ttl>
		 </ehcache:expiry>
		 <ehcache:resources>
			 <ehcache:heap unit="entries">1</ehcache:heap>
		 </ehcache:resources>
 	</ehcache:cache>

 	<ehcache:cache alias="HoldingTimeCache">
		<ehcache:key-type>org.transitclock.core.dataCache.HoldingTimeCacheKey</ehcache:key-type>
		<ehcache:value-type>org.transitclock.db.structs.HoldingTime</ehcache:value-type>
		<ehcache:expiry>
			<ehcache:ttl unit="hours">1</ehcache:ttl>
		</ehcache:expiry>
		 <ehcache:resources>
			<ehcache:heap unit="entries">1</ehcache:heap>
		</ehcache:resources>
	</ehcache:cache>
</ehcache:config>
